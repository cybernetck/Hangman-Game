<!DOCTYPE html>
<html>
<head>
<meta name="description" content="[hangman game - coding bootcamp class]">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">

  <link rel="stylesheet" href="assets/css/style.css" type="text/css"> 
  <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet" type="text/css" />

  <title>JS Bin</title>
</head>
<body>
  <title>
    Homework #3 - Hangman Game
  </title>
  
<script src="https://code.jquery.com/jquery.min.js"></script>

<script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>

<!-- DOM manipulation file created in class -->
<script src="https://cybernetck.github.io/JS-powered-TODO-List/dom.js"></script>

<!-- Game logic -->
<script src="assets/javascript/game.js"></script>
  
<div class="container-fluid">
  <div class="header">
    <h1> Hangman game! </h1>
  </div>
  
<div class="container">
  
  <div class="row">
    <div class="col-md-4">
      <div id="score_section">
      <h3 id="lives">  Lives = 11 </h3>
      <h3 id="wins">  # Wins = 0  </h3>
      <h3>
      
    </div>
    <div class="col-offset-md-3 col-md-3">
        <h3> Guesses: </h3>
        <h3 id="guesses">  </h3>
       
    </div>
    </div>
  </div>
  
<div class="row">
  <div class="col-offset-md-3 col-md-3">
    <div id="gameBoard">
      <h2 id="gameWord"> </h2>
    </div>
  </div>
  <div class="col-md-3">
 
      <h2 id> </h2>
   
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <h2 id="gameStatus"> </h2>
  </div>
</div>

<script type="text/javascript">

var userGuess = [];
var tries = 11;
var wordTest = wordRandom();
var wordArray = wordTest.join("");
var userGuess = [];
var wins = 0;
/* regular expression to only count letters a-z as a valid try */
var validEntry = (/a-z/);
var wordAnswer = [];
console.log(wordArray);

var initBoard = function () {

  var gameRefId = document.querySelector("#gameWord");

    for (var x=0; x < wordTest.length; ++x) {
      wordAnswer[x] = "_";
      $("#gameWord").appendHtml(" " + wordAnswer[x] + " ");
       } 

   console.dir("initializing board...");

  }
  
//game logic

var checkMatch = function (event) {
 
  console.log("Here's a peek at the word...", wordArray, "length: ", wordArray.length);

//while (tries > 0 && wordTest.length > 0 ) {
//for (var i=0 ; i < tries; ++i) {

  console.log("keyup!");

//var keyPressed = prompt("Enter a key. You have " + tries + " left. To stop the game, type 'stop'. ");

userGuess.push(event.key);

$("#guesses").html(userGuess);

var keyPressed = event.key; 

console.log(keyPressed);

function recursiveRemove (tempKey) {
    var index = wordTest.indexOf(tempKey);
    var removed = wordTest.splice(index,1);
    /* remove letter from array */
    removed;

    console.log("It exists!", tempKey, wordTest); 
    console.log("here's what was removed.", removed);
}

// var isLetter = validEntry.exec(keyPressed);

// if (!isLetter) {

//   $("#gameStatus").html(" Try again - Please enter letters only. ");

// }

if (wordTest.includes(keyPressed) == true)

    {
       /* internal function to handle removing singular values and multiple values */ 

            recursiveRemove(keyPressed);

           /* after removing the first occurrance of keyPressed, remove all other occurrences also */
           
            while (wordTest.includes(keyPressed) == true) 
                {
                    recursiveRemove(keyPressed);
                }
    }     

else if (keyPressed == "stop")

    {
        console.log("stopping...bye :( ");
    
    } 

else if ((wordTest.includes(keyPressed) == false) && (tries > 0))

    {
        console.log("Does not exist - try again! ", wordTest);
        tries--;
        $("#lives").html(" Lives : " + tries);
        console.log("tries...", tries);
    }


else if (tries > 0 && wordTest.length == 0)

    {
        console.log("congrats, you've won!");
    
    }

else if (tries == 0 && wordTest.length > 0)

    {
        console.log("game over man... game over!");

    }
    
// Check final state - either you've won... or lost!

    if (tries == 0 && wordTest.length > 0)

    {

    console.log("game over man... game over!");
    $("#gameStatus").html(" game over man... game over! ");
    }

else if (tries > 0 && wordTest.length == 0)

    {

console.log("congrats, you've won!");
$("#gameStatus").html(" congrats, you've won! ");
wins++;
$("#wins").html(" Wins : " + wins);

    }
  
  $("guesses").appendHtml(userGuess);

  console.log("keyPressed", keyPressed);

}

//initialize game
initBoard();
document.addEventListener("keyup", checkMatch);

</script>
  
</body>
</html>